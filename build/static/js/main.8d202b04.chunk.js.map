{"version":3,"sources":["services/persons.js","components/Notification.js","components/PersonForm.js","components/Filter.js","components/DeleteButton.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","status","Notification","message","type","className","PersonForm","newName","setNewName","newNumber","setNewNumber","persons","setPersons","setNotification","onSubmit","event","preventDefault","existing","map","person","name","indexOf","template","window","confirm","modifiedPerson","personService","returnedPerson","msg","setTimeout","catch","error","allPersons","updateExisting","number","newPerson","createdPerson","concat","addNew","value","onChange","target","Filter","filter","setFilter","DeleteButton","onClick","Persons","phonebook","RegExp","test","i","key","length","App","useState","notification","console","log","useEffect","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8d202b04.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.status)\n}\n\nexport default { getAll, create, update, remove }","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n    if (message === null) {\n        return null\n    }\n    return (\n        <div className={type}>\n            {message}\n        </div>\n    )\n}\n\n\nexport default Notification","import React from 'react'\nimport personService from '../services/persons'\n\nconst PersonForm = ({ newName, setNewName, newNumber, setNewNumber, persons, setPersons, setNotification }) => {\n\n    const handleNewPerson = (event) => {\n        setNewName(event.target.value)\n    }\n\n    const handleNewNumber = (event) => {\n        setNewNumber(event.target.value)\n    }\n\n    const updateExisting = (modifiedPerson) => {\n        const id = modifiedPerson.id\n        personService\n            .update(id, modifiedPerson)\n            .then(returnedPerson => {\n                setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n                const msg = `${newName}'s number updated successfully`\n                setNotification({ message: msg, type: 'success' })\n                setTimeout(() => {\n                    setNotification({ message: null, type: null })\n                }, 5000)\n            })\n            .catch(error => {\n                const msg = `Information of ${modifiedPerson.name} has already been removed from the server. Phonebook will be refreshed.`\n                setNotification({ message: msg, type: 'error' })\n                setTimeout(() => {\n                    setNotification( { message: null, type: null })\n                }, 5000)\n                personService\n                    .getAll()\n                    .then(allPersons => {\n                        setPersons(allPersons)\n                    })\n            })\n    }\n\n    const addNew = (newPerson) => {\n        const template = `${newPerson.name} successfully added to phonebook`\n        personService\n            .create(newPerson)\n            .then(createdPerson => {\n                setPersons(persons.concat(createdPerson))\n                setNewName('')\n                setNewNumber('')\n                setNotification({ message: template, type: 'success' })\n                setTimeout(() => {\n                    setNotification({ message: null, type: null })\n                }, 5000)\n            })\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        const existing = persons.map(person => person.name).indexOf(newName)\n        if ( existing !== -1) {\n            const template = `${newName} is already added to the phonebook, replace the old number with a new one?`\n            if (window.confirm(template)) {\n                const modifiedPerson = { ...persons[existing], number: newNumber }\n                updateExisting(modifiedPerson)\n            }\n        } else {\n            const newPerson = {\n                name: newName,\n                number: newNumber,\n            }\n            addNew(newPerson)\n        }\n\n    }\n\n    return (\n        <form onSubmit={handleSubmit}>\n            <div>name: <input value={newName} onChange={handleNewPerson} /></div>\n            <div>number: <input value={newNumber} onChange={handleNewNumber} /></div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ filter, setFilter }) => {\n\n    const handleFilter = (event) => {\n        setFilter(event.target.value)\n    }\n\n    return (\n        <div>filter shown with <input value={filter} onChange={handleFilter} /></div>\n    )\n}\n\nexport default Filter","import React from 'react'\nimport personService from '../services/persons'\n\nconst DeleteButton = ({ id, persons, setPersons, setNotification }) => {\n    const name = persons.filter(person => person.id === id)[0].name\n    const handleDelete = () => {\n        if (window.confirm(`Delete ${name}?`)) {\n            personService\n                .remove(id)\n                .then(status => {\n                    if (status === 204) {\n                        setPersons(persons.filter(person => person.id !== id))\n                        const msg = `${name} deleted successfully`\n                        setNotification({ message: msg, type: 'success' })\n                        setTimeout(() => {\n                            setNotification({ message: null, type: null })\n                        }, 5000)\n                    }\n                })\n        }\n    }\n\n    return (\n        <button onClick={handleDelete}>\n            Delete\n        </button>\n    )\n}\n\n\nexport default DeleteButton","import React from 'react'\nimport DeleteButton from './DeleteButton'\n\nconst Persons = ({ persons, setPersons, filter, setNotification }) => {\n\n    const showPersons = persons.filter(person => new RegExp(filter, 'i').test(person.name))\n\n    const phonebook = showPersons.map((person, i) =>\n        <tr key={person.name}>\n            <td><b>{person.name}</b></td>\n            <td>{person.number}</td>\n            <td><DeleteButton id={person.id} persons={persons} setPersons={setPersons} setNotification={setNotification}/></td>\n        </tr>\n    )\n    if (phonebook.length === 0) {\n        return <div>Nothing to show!</div>\n    }\n    return (\n        <table>\n            <tbody>\n                {phonebook}\n            </tbody>\n        </table>\n    )\n}\n\nexport default Persons","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState({ message: null, type: null })\n\n  const hook = () => {\n    personService\n      .getAll()\n      .then(allPersons => {\n        setPersons(allPersons)\n      })\n  }\n  console.log('Rendering', persons.length, 'persons')\n\n  useEffect(hook, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification.message} type={notification.type}/>\n      <Filter filter={filter} setFilter={setFilter} />\n\n      <h2>Add a new</h2>\n      <PersonForm\n      newName={newName}\n      setNewName={setNewName}\n      newNumber={newNumber}\n      setNewNumber={setNewNumber}\n      persons={persons}\n      setPersons={setPersons}\n      setNotification={setNotification}\n      />\n\n      <h2>Numbers</h2>\n      <Persons persons={persons} setPersons={setPersons} filter={filter} setNotification={setNotification} />\n\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}