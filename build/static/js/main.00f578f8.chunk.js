(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),o=n(2),l=n(3),i=n.n(l),s="/api/persons",m=function(){return i.a.get(s).then((function(e){return e.data}))},f=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.status}))},p=function(e){var t=e.message,n=e.type;return null===t?null:r.a.createElement("div",{className:n},t)},b=n(4),E=function(e){var t=e.newName,n=e.setNewName,a=e.newNumber,c=e.setNewNumber,u=e.persons,o=e.setPersons,l=e.showNotification;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=u.map((function(e){return e.name})).indexOf(t);if(-1!==r){var i="".concat(t," is already added to the phonebook, replace the old number with a new one?");if(window.confirm(i))!function(e){var n=e.id;d(n,e).then((function(e){o(u.map((function(t){return t.id!==n?t:e})));var a="".concat(t,"'s number updated successfully");l(a,"success")})).catch((function(e){var t=e.response.data.error;l(t,"error"),m().then((function(e){o(e)}))}))}(Object(b.a)(Object(b.a)({},u[r]),{},{number:a}))}else{!function(e){var t="".concat(e.name," successfully added to phonebook");f(e).then((function(e){o(u.concat(e)),n(""),c(""),l(t,"success")})).catch((function(e){var t=e.response.data.error;l(t,"error")}))}({name:t,number:a})}}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.filter,n=e.setFilter;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},w=function(e){var t=e.id,n=e.persons,a=e.setPersons,c=e.showNotification,u=n.filter((function(e){return e.id===t}))[0].name;return r.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(u,"?"))&&h(t).then((function(e){if(204===e){a(n.filter((function(e){return e.id!==t})));var r="".concat(u," deleted successfully");c(r,"success")}}))}},"Delete")},N=function(e){var t=e.persons,n=e.setPersons,a=e.filter,c=e.showNotification,u=t.filter((function(e){return new RegExp(a,"i").test(e.name)})).map((function(e,a){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,r.a.createElement("b",null,e.name)),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement(w,{id:e.id,persons:t,setPersons:n,showNotification:c})))}));return 0===u.length?r.a.createElement("div",null,"Nothing to show!"):r.a.createElement("table",null,r.a.createElement("tbody",null,u))},g=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),i=l[0],s=l[1],f=Object(a.useState)(""),d=Object(o.a)(f,2),h=d[0],b=d[1],w=Object(a.useState)(""),g=Object(o.a)(w,2),y=g[0],O=g[1],j=Object(a.useState)({message:null,type:null}),k=Object(o.a)(j,2),P=k[0],S=k[1],C=function(e,t){S({message:e,type:t}),setTimeout((function(){S({message:null,type:null})}),5e3)};return console.log("Rendering",n.length,"persons"),Object(a.useEffect)((function(){m().then((function(e){c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{message:P.message,type:P.type}),r.a.createElement(v,{filter:y,setFilter:O}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(E,{newName:i,setNewName:s,newNumber:h,setNewNumber:b,persons:n,setPersons:c,showNotification:C}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(N,{persons:n,setPersons:c,filter:y,showNotification:C}))};n(37);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.00f578f8.chunk.js.map